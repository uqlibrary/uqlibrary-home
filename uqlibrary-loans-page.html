<link rel="import" href="../uqlibrary-elements/0.5.4/lib/vulcanized.html">

<polymer-element name="uqlibrary-loans-page">

  <template>
    <uqlibrary-api-account-loans id="loans"></uqlibrary-api-account-loans>
    <uqlibrary-borrowing data="{{loans}}"></uqlibrary-borrowing>
  </template>

  <script>
    (function() {
      Polymer({

        created: function () {
          this.loans = {
            checkedOut: [],
            holds: [],
            fines: []
          };
        },

        ready: function () {
        },

        show: function () {
          var that = this;
          this.$.loans.addEventListener('uqlibrary-api-account-loans-loaded', function(e) {
            var loans = e.detail;
            if (! loans.hasOwnProperty('processed')) {
              loans.processed = true;
            }
            that.loans = loans;
          });
          this.$.loans.get();
        }
      });
    })();
  </script>

</polymer-element>
